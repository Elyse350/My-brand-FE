<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>MY BRAND</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/PROFILE.jpg" rel="icon">
  <link href="assets/img/PROFILE.jpg" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">


  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">


  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>

  <!-- ======= Header ======= -->

  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="assets/img/PROFILE.jpg" alt="" class="img-fluid rounded-circle">
        <h1 class="text-light"><a href="index.html">Elyse MUTONI</a></h1>
        <div class="social-links mt-3 text-center">
          <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul>
          <li><a href="#hero" class="nav-link scrollto active"><i class="bx bx-home"></i> <span>Home</span></a></li>
          <li><a href="#about" class="nav-link scrollto"><i class="bx bx-book-content"></i> <span>About</span></a></li>
          <li><a href="#skills" class="nav-link scrollto"><i class="bx bx-file-blank"></i> <span>Skills</span></a></li>
          <li><a href="#portfolio" class="nav-link scrollto"><i class="bx bx-book-content"></i> <span>Blog</span></a>
          </li>
          <li><a href="#services" class="nav-link scrollto"><i class="bx bx-server"></i> <span>Portfoio</span></a></li>
          <li><a href="#contact" class="nav-link scrollto"><i class="bx bx-envelope"></i> <span>Contact</span></a></li>
          <li><a href="./signin.html" class="nav-link scrollto"><i class="bx bx-user"></i> <span>Logout</span></a></li>
        </ul>
      </nav>
      <!-- .nav-menu -->
    </div>
  </header>
  <!-- End Header -->

  <!-- ======= Hero Section ======= -->
  

    <!-- ======= About Section ======= -->
    
    <!-- ======= Portfolio Section ======= -->
    <section id="portfolio" class="portfolio section-bg" style="background-color: rgb(185, 167, 77);width: 100%;">
      <div class="container" style="height: 90vh;">

        <div class="section-title">
          <h2>Blog</h2>
          <p style="margin-left: 200px;">Welcome to my blog, where I showcase my coding projects aimed at addressing real-world challenges. Among them, the Rwanda Booking Tour application revolutionizes tourism by streamlining booking processes. In the realm of healthcare, my Doctor Appointment system enhances scheduling efficiency. Additionally, my Trash Pay platform incentivizes waste management for a cleaner environment.</p>
        </div>
       




      </div>
    </section><!-- End Portfolio Section -->

    <script>
        const blogButton = document.querySelector(".blog-button");
        const profileIcon = document.querySelector(".user-name-profile");
        const handleLogout = () => {
          localStorage.removeItem("loggedUser");
          (successContainer.style.display = "flex"),
            (successElement.innerHTML = "Logged out successfully");
          timeDelay(successContainer, successElement);
          window.location.reload();
        };
        console.log("LoggedUser", loggedUser)
  
        const navigate = () => {
          if (loggedUser?.role == "admin") {
          window.location.href = "../dashboard/dashboard.html";
          }
          else if (loggedUser?.role == "user") {
          window.location.href = "../user-dashboard/user-dashboard-profile.html";
  
          }
        };
  
  
        const openIcon = ()=>{
          profileInfo.style.display = "block"
          profileInfo.style.opacity = 1
        }
  
        const closeIcon = ()=>{
          profileInfo.style.display = "none"
          profileInfo.style.opacity = 0
        }
        if (loggedUser) {
          blogButton.style.display = "none";
          profileIcon.style.display = "flex";
          profileIcon.title = loggedUser?.name + ", " + loggedUser?.role;
  
          profileIcon.innerHTML = `
          <div class="letter" onClick="openIcon()">
          <h3 class="grey-text">${loggedUser?.name
            .split("")[0]
            .toUpperCase()}</h3>
          <div class="info user-setting-info">
            <div class="user-close-container">
            <p class="white-text">${loggedUser?.name } <span style=textDecoration:"capitalize"></span></p>
            <button onClick="closeIcon()" class="button">X</button>
              </div>
            
            <button onClick="navigate()" class="rounded-text grey-text category-tag dashboard-link">
              <p>My Dashboard</p>
              <img src="../assets//images//dashboard-icons/dashboard.svg" alt="">
          </button>
            <button onClick="handleLogout()" class="rounded-text grey-text category-tag dashboard-link dashboard-logout">
              <p>Logout</p>
              <img src="../assets//images//dashboard-icons/logout.svg" alt="">
          </button>
          </div>
        </div>
          `;
        } else {
          blogButton.style.display = "flex";
          profileIcon.style.display = "none";
        }
        const profileInfo = document.querySelector(".user-setting-info");
        
      </script> 
          </div>
          <div class="mobile-nav">
            <div class="menu-bar">
              <a href="../index.html" class="logo">
                <img src="../assets/images/logo.png" alt="logo"/>
            </a>
              <div class="burger">
               <div class="burger-line burger-line1"></div>
               <div class="burger-line burger-line2" ></div>
               <div class="burger-line burger-line3"></div>
            </div>
            </div>
  
            <div class="mobile-links">
              <ul>
                <li><a href="">Home</a></li>
                <li></li>
                <li></li>
                <li></li>
                <li><a href="./LoginPage.html" target="_blank" rel="noopener noreferrer" class="button-white button ">
                   BLOG</a></li>
            </ul>
            </div>
            
          </div>
        </nav>
  
        <!-- homepage -->
  
        <div class="skills-section single-blog-page" id="blog-home">
  
        </div>
        <a class="button blog-edit-button" id="blog-edit-button">
          <span class="material-symbols-outlined">
            edit
            </span>
          <p>Edit</p>
        </a>
  <div class="blog-page-section" id="blog-page-section">
  <div class="single-blog-content" id="single-blog-content">
      <img src="../assets/images/deepmind.webp" alt="" class="blog-image">
  
      <div class="blog-content">
          <p class="white-text">Artificial intelligence (AI) and machine learning have transformed numerous industries, and the field of software development is no exception. Among the most notable developments in this domain is OpenAI's ChatGPT, a state-of-the-art language model based on the GPT-4 architecture. ChatGPT has the potential to revolutionize the way developers interact with their code, but it also raises some valid concerns. In this article, we will explore the pros and cons of ChatGPT to determine if it is a developer's best friend or worst enemy.</p>
          <p class="white-text">Artificial intelligence (AI) and machine learning have transformed numerous industries, and the field of software development is no exception. Among the most notable developments in this domain is OpenAI's ChatGPT, a state-of-the-art language model based on the GPT-4 architecture. ChatGPT has the potential to revolutionize the way developers interact with their code, but it also raises some valid concerns. In this article, we will explore the pros and cons of ChatGPT to determine if it is a developer's best friend or worst enemy.</p>
          <p class="white-text">Artificial intelligence (AI) and machine learning have transformed numerous industries, and the field of software development is no exception. Among the most notable developments in this domain is OpenAI's ChatGPT, a state-of-the-art language model based on the GPT-4 architecture. ChatGPT has the potential to revolutionize the way developers interact with their code, but it also raises some valid concerns. In this article, we will explore the pros and cons of ChatGPT to determine if it is a developer's best friend or worst enemy.</p>
          <p class="white-text">Artificial intelligence (AI) and machine learning have transformed numerous industries, and the field of software development is no exception. Among the most notable developments in this domain is OpenAI's ChatGPT, a state-of-the-art language model based on the GPT-4 architecture. ChatGPT has the potential to revolutionize the way developers interact with their code, but it also raises some valid concerns. In this article, we will explore the pros and cons of ChatGPT to determine if it is a developer's best friend or worst enemy.</p>
      </div>
  
      <div class="blog-home-card-info blog-likes-section">
        <!-- <img src="../assets/images/favorite-outline.svg"/> -->
        <img src="../assets/images/favorite.svg" alt="logo"/>
        <p class="rounded-text category-tag white-text title">23 people likes this post</p>
  
      </div>
  
      <div class="blog-home-card-info">
          <img src="../assets/images/my-avatar.svg" alt="" class="avatar">
          <p class="grey-text">Angelo Christian</p>
          <p class="grey-text">&#x2022;</p>
          <p class="grey-text">22 January 2024</p>
          
        </div>
  
        <div class="blog-comment-section">
          <p class="white-text title">Comments</p>
          <form class="input-for comment-form" id="comment-form">
            <input type="text" name="comment" id="blog-comment" placeholder="Comment here"/>
         <p class="rounded-text category-tag white-text title">Add comment</p>
          </form>
  
          <div class="comment-container" id="comment-container">
            <div class="single-comment-card">
              <div class="upper-text">
                <p class="white-text title small-text">Mucyo Fred</p>
                <p class="grey-text small-text"> - 24 February 2024</p>
              </div>
              <p class="small-text grey-text comment-text">The field of machine learning is no joke.</p>
            </div>
            <div class="single-comment-card">
              <div class="upper-text">
                <p class="white-text title small-text">Kamali Fred</p>
                <p class="grey-text small-text"> - 24 February 2024</p>
              </div>
              <p class="small-text grey-text comment-text">The field of machine learning is no joke.</p>
            </div>
          </div>
        </div>
  </div>
        <!-- Footer -->
        <div class="footer" id="contact">
          <div class="rounded-text white-text"><p>Contact us</p></div>
          <div class="footer-main">
            <div class="footer-section footer-left">
  
              <h3 class="big-text">Get in touch with me!</h3>
              <div class="footer-details">
                <p class="title white-text small-text">Location</p>
                <p class="content grey-text small-text">Kigali Rwanda</p>
              </div>
  
              <div class="footer-details">
                <p class="title white-text small-text">Connect</p>
                <div  class="contact-info">
                  <p class="content grey-text small-text">Email:</p>
                  <a href="mailto=ishgatetechristian@gmail.com" class="content grey-text small-text">ishgatetechristian@gmail.com</a>
                </div>
                <div class="contact-info">
                  <p class="content grey-text small-text">Phone:</p>
                  <a href="" class="content grey-text small-text">0785534291</a>
                </div>
                
              </div>
              <div class="footer-details social-links">
                <p class="title white-text small-text">Social Links</p>
                <div class="icons">
                 <div class="socials">
                 <img src="../assets/images/linkedin.png" alt=""/>
                </div>
                <div class="socials">
                 <img src="../assets/images/twitter.png" alt=""/>
                </div>
                </div>
              </div>
            </div>
            <div class="footer-section footer-right">
              <form class="contact-form" id="contact-form" method="GET">
                <div class="input-form">
                  <p class="white-text grey-text">Name</p>
                  <input
                    type="text"
                    name="name"
                    id="contact-form-name"
                    placeholder="Enter Your Name"
                  />
                  <p class="small-text red-text error" id="contact-form-name-error"></p>
                </div>
                <div class="input-form">
                  <p class="white-text grey-text">Email</p>
                  <input
                    type="text"
                    name="email"
                    id="contact-form-email"
                    placeholder="Enter Your Email"
                  />
                  <p class="small-text red-text error" id="contact-form-email-error"></p>
  
                </div>
                <div class="input-form">
                  <p class="white-text grey-text">Phone Number</p>
                  <input
                    type="text"
                    name="phone"
                    id="contact-form-phone"
                    placeholder="Enter Your Name"
                  />
                  <p class="small-text red-text error" id="contact-form-phone-error"></p>
  
                </div>
                <div class="input-form">
                  <p class="white-text grey-text small-text">Message</p>
                  <label for="message"></label>
                  <textarea
                    name="message"
                    id="contact-form-message"
                    rows="3"
                  ></textarea>
                  <p class="small-text red-text error" id="contact-form-message-error"></p>
  
                </div>
                <div class="input-form">
                  <!-- <input type="button" value="Send Message" class="button button-white" id="contact-form-submit-button"> -->
                  <button
                    type="submit"
                    value=""
                    class="button"
                    id="contact-form-submit-button"
                  >
                    Send Message
                  </button>
                </div>
              </form>
            </div>
          </div>
  
          <div class="small-text grey-text copyright"><p>&copy; 2024 . All rights reserved Angelo Christian</p></div>
        </div>
      </div>
   
      <script>
        const blogHeader = document.getElementById("blog-home")
        const blogContent = document.getElementById('single-blog-content')
        let currentUrl = window.location.href
        let allBlogs = JSON.parse(localStorage.getItem("articles"))
        let indexUrl = currentUrl.split('index=')[1]
        let editBlogButton = document.getElementById("blog-edit-button")
  
  
        if(loggedUser?.role == "admin"){
        editBlogButton.style.display = "flex"
        editBlogButton.href = `../dashboard/dashboard-single-blog.html?index=${indexUrl}`
  
          // editBlogButton.addEventListener("click",()=>{
          //   // window.location.replace(`/single-blog-page.html?index=${indexUrl}`)
          // })
        }
        const apiUrl = `http://localhost:8080/blogs/${indexUrl}`;
  
        let blog = allBlogs[1]
        const showBlogs =(blog)=>{
         
        let storageComments = blog.comments  
        let storageLikes = blog.likes
  
        blogHeader.innerHTML = `
        <div class="rounded-text white-text category-tag"><p>${blog.category}</p></div>
  <div><h3 class="big-text">${blog.title}</h3></div>
  <div><p class="grey-text text-center join-text">${blog.subtitle}</p></div>
  <div class="blog-dates">
      <div class="date blog-dates-details">
          <span class="material-symbols-outlined">
              calendar_today
              </span>
              <p>${(blog.createdAt.split("T")[0]).split("-").join("/")}</p>
      </div>
      <div class="date blog-dates-details">
          <span class="material-symbols-outlined">
              timer
              </span>
              <p>${blog.timeToRead } Minutes</p>
      </div>
  </div>
        `
  
        blogContent.innerHTML = `
    <div class="single-blog-content" id="single-blog-content">
      <img src="${blog.poster}" alt="" class="blog-image blog-image-poster">
  
      <div class="blog-content">
        <p class="white-text">${blog.content.split("\n").map((paragraph) => paragraph).join("<br>")}</p>
        <!-- Use .join("<br>") to replace newlines with <br> tags -->
      </div>
  
      <div class="blog-home-card-info blog-likes-section">
       
      </div>
  
           <div class="blog-home-card-info">
        <img src="../assets/images/my-avatar.svg" alt="" class="avatar">
        <p class="grey-text">${blog.editor || "Angelo Christian"}</p>
        <p class="grey-text">&#x2022;</p>
        <p class="grey-text">${blog.createdAt.split("T")[0]}</p>
      </div>
  
      <div class="blog-comment-section">
        <p class="white-text title">Comments</p>
        <form action="" class="input-for comment-form" id="comment-form">
          <input type="text" name="comment" id="blog-comment" placeholder="Comment here"/>
          <button type="submit" class="rounded-text category-tag white-text title" >Add comment</button>
        </form>
  
        <div class="comment-container" id="comment-container">
          
        </div>
      </div>
    </div>
  `;
  
  const likesContainer = document.querySelector('.blog-likes-section');
    
    fetch(`http://localhost:8080/likes/blogs/${indexUrl}`)
    .then(response => response.json())
    .then(data => {
      setLikeData(data.data)
    })
    .catch(error => {
      console.error('Error fetching data:', error);
    });
    
    function setLikeData(data){
      likesContainer.innerHTML = `
  <!-- <img src="../assets/images/favorite-outline.svg"/> -->
  
    <img src="../assets/images/favorite.svg" id='heart-icon'  alt="liked"/>
  
        <p class="rounded-text category-tag white-text title">${data?.length} people liked this post</p>
  
  `;
  
  let heartButton = document.getElementById('heart-icon');
  let heart = document.getElementById('heart-icon');
  
  initializeLikeButton(data, heart);
  
  heart.addEventListener("click", ()=>{handleLikes()})
  }
  
  const handleLikes = () => {
      let params = {
         userId : loggedUser?._id,
         blogId : indexUrl,
         isLiked: true
        }
    
      fetch('http://localhost:8080/likes/add',{
          method: 'POST',
          body: JSON.stringify(params),
          headers: {
            "Authorization": `Bearer ${tokens.bearerToken}`,
              'Content-Type': 'application/json',
          }
      })
      .then(response => response.json())
      .then(data => {
        successContainer.style.display = "flex",
          successElement.innerHTML = data.message
          timeDelay(successContainer, successElement)
          setTimeout(()=>{
             window.location.reload();
          }, 2000)
          return(data)
      })
      .catch(error => {
          console.error('Error:', error);
      });
  };
  
  
  
  // // Add event listener to the heart icon
  // heart.addEventListener('click', handleLikeBlog);
  
  function initializeLikeButton(data, heart) {
    const userLiked = data.some((like) => like.userId === loggedUser?._id);
  
    if (userLiked) {
      heart.src = "../assets/images/favorite.svg";
      heart.alt = 'liked';
    } else {
      heart.src = "../assets/images/favorite-outline.svg";
      heart.alt = 'not-liked';
    }
  }
  
  function handleLikeBlog(data) {
    const likeExists = data.find((like) => like.userId === loggedUser?._id);
  
    if (likeExists) {
      // User unlikes the post
      heart.src = "../assets/images/favorite-outline.svg";
      heart.alt = 'not-liked';
  
      handleLikes()
    
    } else {
      handleLikes()
      heart.src = "../assets/images/favorite.svg";
      heart.alt = 'liked';
      
    }
    // allBlogs[indexUrl].likes = storageLikes
    // console.log("this blog index url", allBlogs[indexUrl])
    // Update the like count (you can display it wherever needed)
    // const likeCount = storageLikes.length;
    // console.log(`Total likes: ${likeCount}`);
  
    // localStorage.setItem('articles', JSON.stringify(allBlogs))
    successContainer.style.display = "flex",
          successElement.innerHTML = "Liked updated"
          timeDelay(successContainer, successElement)
          setTimeout(()=>{
             window.location.reload();
          }, 2000)
         
      }
  
  const blogComment = document.getElementById('blog-comment')
  const commentForm = document.getElementById('comment-form')
  const commentContainer = document.getElementById('comment-container')
  
        commentForm.addEventListener('submit',(e)=>{
          e.preventDefault();
          if(blogComment.value === '' || blogComment.value== null){
            errorContainer.style.display = "flex",
            errorElement.innerHTML = "Please input comment"
            timeDelay(errorContainer, errorElement)
          } else{
            // handleAddComment()
            submitComment()
          }
        })
        const handleAddComment =()=>{
          let params = {
            postedBy:loggedUser?.name,
            date: `${today}/${month}/${year}`,
            time: `${hours}:${minutes}:${seconds}`,
            content:blogComment.value,
          }
  
          blog.comments.push(params)
          // console.log("this blog index url", allBlogs[indexUrl])
  
          localStorage.setItem('articles', JSON.stringify(allBlogs))
          successContainer.style.display = "flex",
          successElement.innerHTML = "Comment Added successfully"
          timeDelay(successContainer, successElement)
          setTimeout(()=>{
             window.location.reload();
          }, 2000)
         
        }
  // fetch comments from
        fetch(`http://localhost:8080/comments/blogs/${indexUrl}`)
      .then(response => response.json())
      .then(data => {
        console.log("-------------comment data",data);
        populateComments(data.data)
      })
      .catch(error => {
          console.error('Comment Error:', error);
      });
  
      const populateComments = (storageComments)=>{
  
        if(storageComments?.length == 0){
          
          commentContainer.innerHTML = `
          <div class="upper-text">
        <p class="white-text title small-text">No Comments Yet</p>
        <p class="grey-text small-text"></p>
     </div>
     <p class="small-text grey-text comment-text">Be the first to comment</p>
    `
        }
        storageComments?.map((comment, index)=>{
  
          fetch(`http://localhost:8080/users/${comment.userId}`, {
            headers: {
            "Authorization":`Bearer ${tokens.bearerToken}`,
              'Content-Type': 'application/json',
          },
      method:"GET"
  })
  .then((response) => response.json())
  .then((data) => {
   
    populateUserData(data.data);
  })
  .catch((error) => {
    console.error("Error fetching data:", error);
  });
  const populateUserData =(userData)=>{
      const commentCard = document.createElement('div')
    commentCard.classList.add('single-comment-card')
    commentCard.innerHTML=`
    <div class="upper-text">
        <p class="white-text title small-text">${userData?.name || "user"}</p>
        <p class="grey-text small-text"> &#x2022; ${comment.createdAt.split("T")[0]}</p>
     </div>
     <p class="small-text grey-text comment-text">${comment.content}</p>
    `
  
    commentContainer.appendChild(commentCard)
  }
  
  
  })
      }
        const submitComment = () => {
      let params = {
         blogId : indexUrl,
         content: blogComment.value
        }
      fetch('http://localhost:8080/comments/add',{
          method: 'POST',
          body: JSON.stringify(params),
          headers: {
            "Authorization":`Bearer ${tokens.bearerToken}`,
              'Content-Type': 'application/json',
          }
      })
      .then(response => response.json())
      .then(data => {
     
        const successContainer = document.getElementById("success-container");
      const successElement = document.getElementById("success-text");
  
        successContainer.style.display = "flex",
          successElement.innerHTML = "Comment Added successfully"
          // timeDelay(successContainer, successElement)
          setTimeout(()=>{
            successContainer.style.display = "none";
            successElement.innerText = "";
             window.location.reload();
          }, 2000)
      })
      .catch(error => {
          console.error('Error:', error);
      });
  };
  
  }
  
        fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      APIBlogs = data; // Assign the fetched data to the variable
      showBlogs(data.data);
    })
    .catch(error => {
      console.error('Error fetching data:', error);
    });
  
        </script>
     
  
  
   
  
      
  =
      <!-- <script src="../Js/alert.js"></script> -->
    </body>
  </html>
  

<!-- homepage -->


<
</script> 

  </main><!-- End #main -->


  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/typed.js/typed.umd.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>


  <script src="assets/js/main.js"></script>
  <script src="script.js"></script>
  <script src="assets/contact/contact.js "></script>
  <script src="index.js"></script>

</body>

</html>